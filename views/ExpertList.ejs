<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarot Experts</title>
    <link rel="stylesheet" href="stylesheets/ExpertList.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="/ExpertFilter">예약하기</a></li>
                <li><a href="/reserveInfo">예약정보</a></li>
                <li><a href="/mypage">회원정보</a></li>
            </ul>
        </nav>
    </header>
    <h1>"상담할 타로 전문가를 선택해 주세요."</h1>
    <form action="/ExpertInfo" method="">
        <table>
            <thead>
                <tr>
                    <th></th>
                    <th>이름</th>
                    <th>나이</th>
                    <th>경력</th>
                </tr>
            </thead>
            <tbody id="expertsTable">
                <!-- 여기에 서버로부터 받아온 데이터가 추가될 예정입니다 -->
            </tbody>
        </table>
        <button type="submit" class="select-button">선택하기</button>
    </form>

    <script>
        // 서버로부터 여러 JSON 데이터를 받아와서 테이블을 업데이트하는 코드
        fetch('/')
            .then(response => response.json())
            .then(data => {
                const expertsTable = document.getElementById('expertsTable');
                
                data.forEach(jsonData => {
                    jsonData.tarotExperts.forEach(expert => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>
                                <input type="radio" name="selectedExpert" value="${expert.name}">
                            </td>
                            <td>${expert.name}</td>
                            <td>${expert.age}세</td>
                            <td>${expert.experience}년</td>
                        `;
                        expertsTable.appendChild(row);
                    });
                });
            })
            .catch(error => {
                console.error('데이터를 불러오는 도중 에러가 발생했습니다:', error);
            });
    </script>
</body>
</html>
